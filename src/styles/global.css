@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: dark; }

/* Prevent page-level horizontal scroll causing BG gaps on mobile */
html, body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden; /* fallback */
}

/* Use clip when supported to avoid creating scrollbars while still cutting overflow */
@supports (overflow: clip) {
  html, body { overflow-x: clip; }
}

/* Base colors */
html, body { background: theme(colors.bg); color: theme(colors.text); }
* { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }

/* Fixed viewport backdrop (sits behind everything) */
.vt-backdrop {
  position: fixed;
  inset: 0;
  z-index: -1;
  /* Fallback to classic viewport units */
  width: 100vw;
  height: 100vh;
}

/* Prefer modern dynamic viewport units to avoid toolbar jumps/gaps */
@supports (width: 100dvw) {
  .vt-backdrop {
    width: 100dvw;
    height: 100dvh;
  }
}

/* iOS Safari legacy fallback */
@supports (-webkit-touch-callout: none) {
  .vt-backdrop {
    height: -webkit-fill-available;
  }
}

/* Panels & UI tokens */
.panel { @apply rounded-xl2 bg-panel/90 border border-edge/60 shadow-panel backdrop-blur; }
.btn { @apply inline-flex items-center gap-2 rounded-xl2 px-4 py-2 border border-edge/60 bg-surface hover:bg-panel transition; }
.btn-primary { @apply btn border-primary/40 shadow-[0_0_0_1px_rgba(139,92,246,.35)_inset]; }
.badge { @apply text-xs tracking-wide px-2 py-0.5 rounded border border-edge/60 bg-surface/60; }
.kicker { @apply text-xs uppercase tracking-widest text-primary; }

/* Gradient canvas */
.vt-gradient {
  background:
    radial-gradient(600px 220px at 15% 10%, rgba(139,92,246,.25), transparent 60%),
    radial-gradient(440px 200px at 85% 15%, rgba(167,139,250,.20), transparent 60%),
    radial-gradient(520px 260px at 50% 120%, rgba(124,58,237,.18), transparent 65%),
    linear-gradient(180deg, rgba(16,20,26,.8), rgba(11,15,20,.95));
  background-repeat: no-repeat;
  background-color: theme(colors.bg); /* solid fallback */
}

/* Film grain */
.vt-noise { position: relative; }
.vt-noise:before {
  content:""; position:absolute; inset:0; pointer-events:none; opacity:.07;
  background-image: var(--noise, url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' opacity='.7' viewBox='0 0 100 100'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='4'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='.5'/></svg>"));
}

/* Media safety: ensure inline media never forces page overflow */
img, video, canvas { max-width: 100%; height: auto; }
