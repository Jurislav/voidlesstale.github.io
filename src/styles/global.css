@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: dark; }

/* Reset & mobile safety */
*, ::before, ::after { box-sizing: border-box; }
html, body { margin: 0; padding: 0; width: 100%; max-width: 100%; }
html, body { overflow-x: hidden; } /* fallback */
@supports (overflow: clip) { html, body { overflow-x: clip; } }
html { -webkit-text-size-adjust: 100%; }

/* Base colors */
html, body { background: theme(colors.bg); color: theme(colors.text); }
* { -webkit-tap-highlight-color: transparent; }

/* Safe-area padding for sticky nav (prevents notch overlap without creating a gap) */
.safenav { padding-top: env(safe-area-inset-top, 0px); }

/* Fixed viewport backdrop (behind everything) */
.vt-backdrop {
  position: fixed; inset: 0; z-index: -1;
  width: 100vw; height: 100vh; /* fallback */
}
@supports (width: 100dvw) {
  .vt-backdrop { width: 100dvw; height: 100dvh; }
}
@supports (-webkit-touch-callout: none) {
  .vt-backdrop { height: -webkit-fill-available; }
}

/* Gradient canvas */
.vt-gradient {
  background:
    radial-gradient(600px 220px at 15% 10%, rgba(139,92,246,.25), transparent 60%),
    radial-gradient(440px 200px at 85% 15%, rgba(167,139,250,.20), transparent 60%),
    radial-gradient(520px 260px at 50% 120%, rgba(124,58,237,.18), transparent 65%),
    linear-gradient(180deg, rgba(16,20,26,.8), rgba(11,15,20,.95));
  background-repeat: no-repeat;
  background-color: theme(colors.bg); /* solid fallback */
}

/* Film grain â€” pinned to backdrop bounds; never affects layout */
.vt-noise { position: relative; }
.vt-noise:before {
  content:""; position:absolute; inset:0; pointer-events:none; opacity:.07;
  background-image: var(--noise, url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' opacity='.7' viewBox='0 0 100 100'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='4'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='.5'/></svg>"));
  background-repeat: repeat;
}

/* UI primitives */
.panel { @apply rounded-xl2 bg-panel/90 border border-edge/60 shadow-panel backdrop-blur; }
.btn { @apply inline-flex items-center gap-2 rounded-xl2 px-4 py-2 border border-edge/60 bg-surface hover:bg-panel transition; }
.btn-primary { @apply btn border-primary/40 shadow-[0_0_0_1px_rgba(139,92,246,.35)_inset]; }
.badge { @apply text-xs tracking-wide px-2 py-0.5 rounded border border-edge/60 bg-surface/60; }
.kicker { @apply text-xs uppercase tracking-widest text-primary; }

/* Media safety */
img, video, canvas { max-width: 100%; height: auto; display: block; }
