---
import DevlogBase from "../layouts/DevlogBase.astro";
import posts from "../data/devlog.json";

const sorted = [...posts].sort((a, b) => new Date(b.date) - new Date(a.date));
const fmt = (iso) => new Date(iso).toLocaleDateString("en-GB", { year:"numeric", month:"short", day:"2-digit" });
---
<DevlogBase title="Devlog â€¢ Voidless Tale" description="Latest updates and progress logs.">
  <section class="dl-container">
    <h1 class="dl-h1">Devlog</h1>
    <p class="dl-lead">Changelogs, experiments, and behind-the-scenes notes.</p>

    <ul class="dl-grid">
      {sorted.map((p) => (
        <li class="dl-card">
          <h2><a href={`/devlog/${p.slug}`} style="color:inherit; text-decoration:none;">{p.title}</a></h2>
          <time datetime={p.date}>{fmt(p.date)}</time>
          <p>{p.summary}</p>
          <div class="dl-actions">
            <a class="dl-btn dl-btn-primary" href={`/devlog/${p.slug}`}>Read</a>
          </div>
        </li>
      ))}
    </ul>
  </section>
</DevlogBase>
